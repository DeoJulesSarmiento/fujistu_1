<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Exam # 2 :  PHP: CRUD </title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.12.1/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.12.1/js/jquery.dataTables.min.js"></script>



  </head>
  <body >


<div class="form-container">
            <div class="side-form">
                        <div class="form-group mt-3">
                            <label class="form-title">Register Full Name</label> <hr>
                        </div>
                    <form>
                        <div class="form-group mb-3" >
                            <label>Fullname:</label>
                            <input type="text" class="form-control" id="fullname" name="fullname">
                        </div>
                        <div class="form-group mb-3" >
                            <label>Position:</label>
                            <input type="text" class="form-control" id="position" name="position">
                        </div>
                        <div class="form-group mb-3" >
                            <label>Section:</label>
                            <input type="text" class="form-control" id="section" name="section">
                        </div>
                        <div class="form-group mb-3" >
                            <label>Status:</label>
                            <input type="text" class="form-control" id="status" name="status">
                        </div>
                
                        <button type="submit" id="btn-primary" class="btn btn-primary"><i class="fa fa-user" aria-hidden="true"></i> Submit</button>
                        <button type="submit" id="btn-danger"class="btn btn-danger"><i class="fa fa-trash" aria-hidden="true"></i> Clear  </button>
                    </form>
            </div> 


            <div class="right-table">
                
                <label style="font-weight:bold;font-size:25px;  "> Employee's Data </label>
                    <table id="example" class="display nowrap cell-border" width="100%">
                    <thead>
                      <tr>
                        <th width="5%" scope="col">No.</th>
                        <th  scope="col">Fullname</th>
                        <th scope="col">Position</th>
                        <th scope="col">Department</th>
                        <th scope="col">Status</th>
                     
                      </tr>
                    </thead>
                    <tbody id="table_body">
            
              
                      
                    </tbody>
                  </table>
            </div>
    </div>
    

            
</div>


</html>



<script>
  $(document).ready(function() {
$('#example').dataTable({
 
    "lengthChange": false,
    "ordering": false
});
});
    </script>
<!--end of Datatables -->

<script src="api.js"></script>  

<script>

  const url = "https://5fdb12ee91f19e00173339f5.mockapi.io/employee";
  const formEl = document.querySelector("form");
  formEl.addEventListener("submit", async (e) => {
    e.preventDefault();
    const formData = new FormData(formEl);
    const formDataSerialized = Object.fromEntries(formData);
    const jsonObject = {
      ...formDataSerialized,
    };
    try {
      const response = await fetch(url, {
        method: "POST",
        body: JSON.stringify(jsonObject),
        headers: {
          "Content-Type": "application/json",
        },
      });
      const json = await response.json();
      console.log(json);
      window.location = window.location.href;
    } catch (e) {
      console.error(e);
      alert("there as an error");
    }
  });
</script>